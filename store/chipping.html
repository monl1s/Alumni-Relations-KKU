<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout | KKU Alumni Store</title>
    <!-- Tailwind CSS & Alpine.js -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        kku: {
                            brick: '#8D3124', /* แดงดินเทศ */
                            gold: '#D4AF37',  /* ทองกัลปพฤกษ์ */
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #f9fafb; }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body x-data="checkoutApp()">

    <!-- 1. Progress Stepper -->
    <div class="bg-white border-b sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 md:py-6 flex justify-center items-center gap-2 md:gap-4 text-[10px] md:text-sm font-bold uppercase tracking-wider">
            <div class="flex items-center text-gray-400"><span class="w-5 h-5 md:w-7 md:h-7 rounded-full border-2 flex items-center justify-center mr-2">1</span> ตะกร้าสินค้า</div>
            <div class="h-[2px] w-8 md:w-16 bg-gray-100"></div>
            <div class="flex items-center text-kku-brick"><span class="w-5 h-5 md:w-7 md:h-7 rounded-full bg-kku-brick text-white flex items-center justify-center mr-2 shadow-lg shadow-red-900/20">2</span> การจัดส่ง</div>
            <div class="h-[2px] w-8 md:w-16 bg-gray-100"></div>
            <div class="flex items-center text-gray-400"><span class="w-5 h-5 md:w-7 md:h-7 rounded-full border-2 flex items-center justify-center mr-2">3</span> ยืนยัน</div>
        </div>
    </div>

    <main class="max-w-7xl mx-auto px-4 py-8 lg:py-12" x-show="!isOrdered" x-cloak>
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:items-start">
            
            <!-- LEFT SIDE: Forms -->
            <div class="lg:col-span-7 space-y-8">
                
                <!-- Shipping Address Section -->
                <section class="bg-white p-6 md:p-8 rounded-[2.5rem] shadow-sm border border-gray-50">
                    <div class="flex items-center gap-3 mb-8 border-b border-gray-50 pb-4">
                        <div class="p-2 bg-red-50 rounded-lg text-kku-brick">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
                        </div>
                        <h2 class="text-xl font-extrabold text-gray-800">ที่อยู่จัดส่งสินค้า</h2>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div class="md:col-span-2">
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">ชื่อ-นามสกุล ผู้รับ *</label>
                            <input type="text" x-model="form.name" class="w-full p-4 bg-gray-50 rounded-2xl border-2 border-transparent focus:border-kku-brick/20 focus:bg-white outline-none transition-all" placeholder="ระบุชื่อจริง-นามสกุล">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">เบอร์โทรศัพท์ติดต่อ *</label>
                            <input type="tel" x-model="form.tel" class="w-full p-4 bg-gray-50 rounded-2xl border-2 border-transparent focus:border-kku-brick/20 focus:bg-white outline-none transition-all" placeholder="08x-xxx-xxxx">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">จังหวัด *</label>
                            <select x-model="form.province" class="w-full p-4 bg-gray-50 rounded-2xl border-2 border-transparent focus:border-kku-brick/20 focus:bg-white outline-none transition-all appearance-none cursor-pointer">
                                <option value="">เลือกจังหวัด</option>
                                <option value="ขอนแก่น">ขอนแก่น</option>
                                <option value="กรุงเทพมหานคร">กรุงเทพมหานคร</option>
                                <option value="เชียงใหม่">เชียงใหม่</option>
                            </select>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-xs font-bold text-gray-400 uppercase tracking-widest mb-2">ที่อยู่และจุดสังเกต *</label>
                            <textarea x-model="form.address" rows="3" class="w-full p-4 bg-gray-50 rounded-2xl border-2 border-transparent focus:border-kku-brick/20 focus:bg-white outline-none transition-all" placeholder="บ้านเลขที่, ถนน, ตำบล, อำเภอ..."></textarea>
                        </div>
                    </div>
                </section>

                <!-- Delivery Method Section -->
                <section class="bg-white p-6 md:p-8 rounded-[2.5rem] shadow-sm border border-gray-50">
                    <h3 class="text-lg font-extrabold text-gray-800 mb-6 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-kku-brick" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0" /></svg>
                        เลือกวิธีการจัดส่ง
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label @click="delivery = 50" class="relative flex p-5 rounded-2xl border-2 cursor-pointer transition-all" :class="delivery === 50 ? 'border-kku-brick bg-red-50/50' : 'border-gray-100 hover:border-gray-200'">
                            <input type="radio" name="del" class="mt-1 accent-kku-brick" checked>
                            <div class="ml-3">
                                <span class="block font-bold text-gray-800">Standard Delivery</span>
                                <span class="block text-xs text-gray-400">Kerry/EMS (3-5 วันทำการ)</span>
                            </div>
                            <span class="ml-auto font-bold text-kku-brick">฿50</span>
                        </label>
                        <label @click="delivery = 0" class="relative flex p-5 rounded-2xl border-2 cursor-pointer transition-all" :class="delivery === 0 ? 'border-kku-brick bg-red-50/50' : 'border-gray-100 hover:border-gray-200'">
                            <input type="radio" name="del" class="mt-1 accent-kku-brick">
                            <div class="ml-3">
                                <span class="block font-bold text-gray-800">Self Pickup</span>
                                <span class="block text-xs text-gray-400">รับที่ศูนย์ศิษย์เก่า (ฟรี)</span>
                            </div>
                            <span class="ml-auto font-bold text-green-600">ฟรี</span>
                        </label>
                    </div>
                </section>

                <!-- Payment Methods Section -->
                <section class="bg-white p-6 md:p-8 rounded-[2.5rem] shadow-sm border border-gray-50">
                    <h3 class="text-lg font-extrabold text-gray-800 mb-6 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-kku-brick" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>
                        ช่องทางชำระเงิน
                    </h3>
                    <div class="grid grid-cols-3 gap-3">
                        <button @click="payment = 'qr'" :class="payment === 'qr' ? 'bg-kku-brick text-white shadow-lg' : 'bg-gray-50 text-gray-400'" class="flex flex-col items-center gap-2 p-5 rounded-3xl transition-all duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" /></svg>
                            <span class="text-[10px] font-bold">QR Payment</span>
                        </button>
                        <button @click="payment = 'card'" :class="payment === 'card' ? 'bg-kku-brick text-white shadow-lg' : 'bg-gray-50 text-gray-400'" class="flex flex-col items-center gap-2 p-5 rounded-3xl transition-all duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>
                            <span class="text-[10px] font-bold">Credit Card</span>
                        </button>
                        <button @click="payment = 'wallet'" :class="payment === 'wallet' ? 'bg-kku-brick text-white shadow-lg' : 'bg-gray-50 text-gray-400'" class="flex flex-col items-center gap-2 p-5 rounded-3xl transition-all duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" /></svg>
                            <span class="text-[10px] font-bold">Alumni Wallet</span>
                        </button>
                    </div>
                </section>
            </div>

            <!-- RIGHT SIDE: Order Summary (Sticky) -->
            <div class="lg:col-span-5 lg:sticky lg:top-28">
                <div class="bg-white rounded-[2.5rem] shadow-xl overflow-hidden border border-gray-50">
                    <div class="p-8 bg-kku-brick text-white">
                        <h2 class="text-xl font-black italic tracking-wide">สรุปรายการคำสั่งซื้อ</h2>
                        <p class="text-[10px] text-red-200 uppercase font-bold tracking-[0.2em] mt-1">KKU Alumni Store Official</p>
                    </div>

                    <div class="p-8 space-y-6">
                        <!-- Items List -->
                        <div class="space-y-5 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar">
                            <template x-for="item in cart" :key="item.id">
                                <div class="flex gap-4 items-center">
                                    <img :src="item.img" class="w-16 h-16 rounded-2xl object-cover bg-gray-100">
                                    <div class="flex-1">
                                        <h4 class="text-sm font-bold text-gray-800" x-text="item.name"></h4>
                                        <p class="text-[10px] text-gray-400 uppercase font-bold" x-text="'Size: ' + item.size"></p>
                                        <div class="flex justify-between items-center mt-1">
                                            <span class="text-xs text-gray-400" x-text="'จำนวน: ' + item.qty"></span>
                                            <span class="font-bold text-kku-brick" x-text="'฿' + (item.price * item.qty)"></span>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>

                        <!-- Coupon -->
                        <div class="flex gap-2">
                            <input type="text" placeholder="รหัสส่วนลดศิษย์เก่า" class="flex-1 p-3 bg-gray-50 rounded-xl outline-none text-xs border border-transparent focus:border-red-100">
                            <button class="bg-gray-800 text-white px-5 py-3 rounded-xl text-xs font-bold uppercase hover:bg-black transition">Apply</button>
                        </div>

                        <!-- Donation Tracker Card -->
                        <div class="bg-kku-gold/5 border border-kku-gold/20 p-5 rounded-3xl flex items-center gap-4">
                            <div class="w-12 h-12 bg-kku-gold rounded-2xl flex items-center justify-center text-white shadow-lg shadow-yellow-600/20">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                            </div>
                            <div>
                                <p class="text-[10px] font-black text-kku-gold uppercase tracking-widest leading-none mb-1">Impact Donation</p>
                                <p class="text-xs text-gray-600">คำสั่งซื้อนี้จะนำเงินจำนวน <span class="font-black text-kku-brick" x-text="'฿' + (calculateDonation())"></span> เข้ากองทุนคณะ</p>
                            </div>
                        </div>

                        <!-- Fees & Total -->
                        <div class="pt-4 space-y-3 border-t border-gray-100">
                            <div class="flex justify-between text-xs font-bold text-gray-400">
                                <span>ราคารวมสินค้า</span>
                                <span x-text="'฿' + subtotal()"></span>
                            </div>
                            <div class="flex justify-between text-xs font-bold text-gray-400">
                                <span>ค่าจัดส่ง</span>
                                <span x-text="'฿' + delivery"></span>
                            </div>
                            <div class="flex justify-between text-xs font-bold text-green-600">
                                <span>ส่วนลดศิษย์เก่าสัมพันธ์</span>
                                <span x-text="'- ฿' + discount"></span>
                            </div>
                            <div class="flex justify-between items-end pt-4">
                                <div>
                                    <p class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">ยอดชำระสุทธิ</p>
                                    <p class="text-3xl font-black text-kku-brick leading-none mt-1" x-text="'฿' + calculateTotal()"></p>
                                </div>
                                <div class="text-right">
                                    <p class="text-[10px] text-gray-400 italic">รวมภาษีมูลค่าเพิ่มแล้ว</p>
                                </div>
                            </div>
                        </div>

                        <button @click="placeOrder" class="w-full bg-kku-brick text-white py-5 rounded-[2rem] font-black text-lg shadow-2xl shadow-red-900/30 hover:scale-[1.02] hover:bg-[#72271d] transition-all transform active:scale-95 flex justify-center items-center gap-2">
                            <span>ยืนยันคำสั่งซื้อ</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success State UI -->
    <div x-show="isOrdered" x-cloak class="min-h-[80vh] flex items-center justify-center p-4">
        <div class="bg-white p-12 rounded-[4rem] shadow-2xl max-w-lg w-full text-center border-b-[12px] border-kku-brick">
            <div class="w-24 h-24 bg-green-50 text-green-500 rounded-full flex items-center justify-center mx-auto mb-8 border-4 border-white shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg>
            </div>
            <h2 class="text-3xl font-black text-gray-900 mb-2">ขอบคุณที่ร่วมบริจาค!</h2>
            <p class="text-gray-500 font-medium mb-8">เราได้รับข้อมูลการชำระเงินของคุณแล้ว <br>สินค้าจะเริ่มจัดส่งภายใน 2 วันทำการ</p>
            <div class="bg-gray-50 rounded-3xl p-6 mb-8 text-left space-y-2">
                <div class="flex justify-between text-xs font-bold tracking-wider text-gray-400 uppercase"><span>เลขที่ใบชำระเงิน</span><span class="text-gray-800">#KKU-2023-8821</span></div>
                <div class="flex justify-between text-xs font-bold tracking-wider text-gray-400 uppercase"><span>ยอดชำระสำเร็จ</span><span class="text-kku-brick" x-text="'฿' + calculateTotal()"></span></div>
            </div>
            <button @click="window.location.reload()" class="w-full bg-gray-900 text-white py-4 rounded-2xl font-bold hover:bg-black transition-all">กลับสู่หน้าร้านค้า</button>
        </div>
    </div>

    <script>
        function checkoutApp() {
            return {
                isOrdered: false,
                delivery: 50,
                discount: 60,
                payment: 'qr',
                form: { name: '', tel: '', address: '', province: '' },
                cart: [
                    { id: 1, name: "เสื้อเฟรชชี่ 69 (Limited)", size: "L", qty: 1, price: 350, img: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=150" },
                    { id: 2, name: "หมวกแก๊ปสกรีนลาย KKU", size: "One Size", qty: 1, price: 250, img: "https://images.unsplash.com/photo-1588850561407-ed78c282e1c7?w=150" }
                ],
                subtotal() {
                    return this.cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
                },
                calculateTotal() {
                    return (this.subtotal() + this.delivery) - this.discount;
                },
                calculateDonation() {
                    return (this.calculateTotal() * 0.1).toFixed(2);
                },
                placeOrder() {
                    if(!this.form.name || !this.form.tel) {
                        alert('กรุณากรอกข้อมูลการติดต่อให้ครบถ้วน');
                        return;
                    }
                    this.isOrdered = true;
                }
            }
        }
    </script>
</body>
</html>